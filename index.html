<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Previsão do Tempo</title>
    <style>

        html {
            width: 100%;
            height: 100%;
        }

        body {
            width: 100%;
            height: 100%;
            margin: 0;
            display: grid;
            grid-template-columns: 4fr 4fr 175px;
            grid-template-rows: 1fr;
        }

        #idCapitalsWeather {
            grid-column: 1;
            grid-row: 1;
            background-color: #ffffff;
            display: grid;
            grid-template-columns: 1;    
            grid-template-rows: 1fr;
        }

        #idWeatherPrediction {
            grid-column: 2;
            grid-row: 1;
            background-color: #252e35;
            display: grid;
            grid-template-columns: 1;    
            grid-template-rows: 80px 1fr;
        }

        #idWeekdaysWeather {
            grid-column: 3;
            grid-row: 1;
            background-color: #151a1d;
            display: grid;
            grid-template-columns: 1;    
            grid-template-rows: 80px 1fr;
            
        }

        #idWeekday {
            grid-template-columns: 1;
            grid-template-rows: 1fr 1fr;
            width: 100%;
            margin: auto;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #ffffff;
        }

        #idWeekday h3 {
            width: fit-content;
            margin: auto;
            grid-row: 1;
            grid-column: 1;
            font-weight: 300;
            font-size: 18px;
            margin-bottom: -5px;
        }

        #idWeekday h2 {
            width: fit-content;
            margin: auto;
            grid-row: 2;
            grid-column: 1;
            font-weight: 500;
            font-size: 26px;
        }

        #idCityName {
            grid-column: 1;
            grid-row: 1;
            align-self: flex-end;
            margin: 0 0 0 75px;
            font-size: 48px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 700;
            color: #ffffff;    
        }

        #idBrazilMap {
            margin: auto;
            height: 90%;
        }

    </style>
</head>
<body>

    <section id="idCapitalsWeather">
        <img id="idBrazilMap" src="images/mapa-do-brasil.jpg" alt="Mapa do Brasil">
    </section>

    <section id="idWeatherPrediction">
        
        <h1 id="idCityName">Criciúma, SC</h1>
       
    </section>

    <section id="idWeekdaysWeather">

        <div id="idWeekday">
            <h3>Dias da</h3>
            <h2>Semana</h2>
        </div>
        
    </section>

    <script>

        var capitals = [{cidade: "Porto Alegre", woeid: 455823}, {cidade: "Florianópolis", woeid: 90200648}, {cidade: "Curitiba", woeid: 455822},
                        {cidade: "São Paulo", woeid: 455827}, {cidade: "Campo Grande", woeid: 26804347}, {cidade: "Rio de Janeiro", woeid: 455825},
                        {cidade: "Vitória", woeid: 455922}, {cidade: "Belo Horizonte", woeid: 455821}, {cidade: "Goiânia", woeid: 455831},
                        {cidade: "Brasília", woeid: 455819}, {cidade: "Cuiabá", woeid: 455829}];

        var key = "6cb8313e";

        document.addEventListener("DOMContentLoaded", getWeatherByLocation);

        async function getGeolocation() {

            var response = await fetch('https://api.hgbrasil.com/geoip?key='+ key +'&format=json-cors&address=remote&precision=false&fields=only_results,address,city,region,country_name,woeid')
            
            response = await response.json();

            return response;
        }

        async function getWeatherByLocation() {

            var location = await getGeolocation();

            var response = await fetch('https://api.hgbrasil.com/weather?key='+ key +'&format=json-cors&woeid=' + location.woeid);

            response = await response.json();

            console.log(response);
        }

        

    </script>
    
</body>
</html>